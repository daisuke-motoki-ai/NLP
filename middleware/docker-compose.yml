version: '3'

services:
  science:
    build: jupyter
    depends_on:
      - jupyterbase
    ports:
      - "8285:8888"
    volumes:
      - ../software:/home/jovyan/notebook
    working_dir: /home/jovyan/notebook/jupyter
    command: jupyter notebook --ip=0.0.0.0 --allow-root --no-browser --NotebookApp.token=''

  shell:
    build: shell
    depends_on:
      - jupyterbase
    volumes: # shell x > ./shell o
      - ./shell/setting:/home/jovyan
      - ../software:/home/jovyan/notebook
    working_dir: /home/jovyan/notebook/jupyter
    tty: true # avoid container stopping

      # makefile の実行を書くかも

  jupyterbase:
    build: jupyterbase
